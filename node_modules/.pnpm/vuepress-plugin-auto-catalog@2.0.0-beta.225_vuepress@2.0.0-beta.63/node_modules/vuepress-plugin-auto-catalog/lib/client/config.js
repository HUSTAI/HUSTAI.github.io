import{usePageData as x,useSiteData as y,defineClientConfig as G}from"@vuepress/client";import{useLocaleConfig as I,VPLink as g,startsWith as C,keys as U,endsWith as m,hasGlobalComponent as k}from"vuepress-shared/client";import{defineComponent as D,computed as K,h as e}from"vue";import{useRouter as M}from"vue-router";import"./styles/auto-catalog.scss";import{useAutoCatalogIconComponent as R,injectAutoCatalogIconComponent as Y}from"./index.js";var N=D({name:"AutoCatalog",props:{base:{type:String,default:""},level:{type:Number,default:3},index:Boolean},setup(r){const u=R(),f=I(AUTO_CATALOG_LOCALES),_=x(),T=M(),E=y(),O=s=>{const p=s[AUTO_CATALOG_INDEX_META_KEY];return typeof p>"u"||p},b=()=>{const s=r.base||_.value.path.replace(/\/[^/]+$/,"/"),p=T.getRoutes(),h=[];return p.filter(({meta:t,path:l})=>{if(!C(l,s)||l===s)return!1;if(s==="/"){const a=U(E.value.locales).filter(n=>n!=="/");if(l==="/404.html"||a.some(n=>C(l,n)))return!1}return(m(l,".html")&&!m(l,"/index.html")||m(l,"/"))&&O(t)}).map(({path:t,meta:l})=>{const a=t.substring(s.length).split("/").length;return{title:l[AUTO_CATALOG_TITLE_META_KEY]||"",icon:l[AUTO_CATALOG_ICON_META_KEY],base:t.replace(/\/[^/]+\/?$/,"/"),order:l[AUTO_CATALOG_ORDER_META_KEY]||null,level:m(t,"/")?a-1:a,path:t}}).filter(({title:t,level:l})=>t&&l<=r.level).sort(({title:t,level:l,path:a,order:n},{title:c,level:o,path:d,order:i})=>l-o||(m(a,"/index.html")?-1:m(d,"/index.html")?1:n===null?i===null?t.localeCompare(c):i:i===null?n:n>0?i>0?n-i:-1:i<0?n-i:1)).forEach(t=>{var l;const{base:a,level:n}=t;switch(n){case 1:h.push(t);break;case 2:{const c=h.find(o=>o.path===a);c&&(c.children??=[]).push(t);break}default:{const c=h.find(o=>o.path===a.replace(/\/[^/]+\/$/,"/"));if(c){const o=(l=c.children)==null?void 0:l.find(d=>d.path===a);o&&(o.children??=[]).push(t)}}}}),h},A=K(()=>b());return()=>e("div",{class:"vp-catalog"},[e("h2",{class:"vp-catalog-main-title"},f.value.title),A.value.length?A.value.map(({children:s=[],icon:p,path:h,title:t},l)=>[e("h3",{id:t,class:["vp-catalog-child-title",{"has-children":s.length}]},[e("a",{href:`#${t}`,class:"header-anchor","aria-hidden":!0},"#"),e(g,{class:"vp-catalog-title",to:h},()=>[r.index?`${l+1}.`:null,p&&u?e(u,{icon:p}):null,t||h])]),s.length?e("ul",{class:"vp-catalog-child-catalogs"},s.map(({children:a=[],icon:n,path:c,title:o},d)=>e("li",{class:"vp-child-catalog"},[e("div",{class:["vp-catalog-sub-title",{"has-children":a.length}]},[e("a",{href:`#${o}`,class:"header-anchor"},"#"),e(g,{class:"vp-catalog-title",to:c},()=>[r.index?`${l+1}.${d+1}`:null,n&&u?e(u,{icon:n}):null,o||c])]),a.length?e("div",{class:"v-sub-catalogs"},a.map(({icon:i,path:v,title:$},L)=>e(g,{class:"vp-sub-catalog",to:v},()=>[r.index?`${l+1}.${d+1}.${L+1}`:null,i&&u?e(u,{icon:i}):null,$||v]))):null]))):null]):e("p",{class:"vp-empty-catalog"},f.value.empty)])}}),S=G({enhance:({app:r})=>{Y(r),k("AutoCatalog",r)||r.component("AutoCatalog",N)}});export{S as default};
//# sourceMappingURL=config.js.map
