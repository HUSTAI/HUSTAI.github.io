import{useEventListener as p,useDebounceFn as c}from"@vueuse/core";import{defineComponent as m,shallowRef as w,ref as i,computed as f,onMounted as h,h as s}from"vue";import{atou as v,LoadingIcon as g}from"vuepress-shared/client";import"../styles/flowchart.scss";import{f as u}from"../index-6e442c7a.js";var y=m({name:"FlowChart",props:{code:{type:String,required:!0},id:{type:String,required:!0},preset:{type:String,default:"vue"}},setup(r){let o=null;const d=w(),t=i(!0),n=i(1),a=f(()=>u[r.preset]||(console.warn(`[md-enhance:flowchart] Unknown preset: ${r.preset}`),u.vue)),l=e=>e<419?.8:e>1280?1:.9;return h(()=>{Promise.all([import("flowchart.ts"),new Promise(e=>setTimeout(e,MARKDOWN_ENHANCE_DELAY))]).then(([{parse:e}])=>{o=e(v(r.code)),n.value=l(window.innerWidth),t.value=!1,o.draw(r.id,{...a.value,scale:n.value})}),p("resize",c(()=>{if(o){const e=l(window.innerWidth);n.value!==e&&(n.value=e,o.draw(r.id,{...a.value,scale:e}))}},100))}),()=>[t.value?s(g,{class:"flowchart-loading",height:192}):null,s("div",{ref:d,class:["flowchart-wrapper",r.preset],id:r.id,style:{display:t.value?"none":"block"}})]}});export{y as default};
//# sourceMappingURL=FlowChart.js.map
