{"version":3,"file":"VuePlayground.js","sources":["../../../src/client/utils/playground.ts","../../../src/client/components/VuePlayground.ts"],"sourcesContent":["import type { VuePlaygroundOptions } from \"../typings/index.js\";\n\nexport const getVuePlaygroundSettings = (\n  settings: string\n): VuePlaygroundOptions =>\n  <VuePlaygroundOptions>JSON.parse(decodeURIComponent(settings));\n","import type { Repl, ReplProps, ReplStore } from \"@vue/repl\";\nimport type { VNode } from \"vue\";\nimport { computed, defineComponent, h, onMounted, ref, shallowRef } from \"vue\";\nimport { LoadingIcon, deepAssign } from \"vuepress-shared/client\";\n\nimport { useVuePlaygroundConfig } from \"../helpers/index.js\";\nimport { getVuePlaygroundSettings } from \"../utils/index.js\";\n\nimport \"@vue/repl/style.css\";\nimport \"../styles/vue-playground.scss\";\n\nexport default defineComponent({\n  name: \"VuePlayground\",\n\n  props: {\n    /**\n     * Playground title\n     *\n     * 演示标题\n     */\n    title: {\n      type: String,\n      default: \"\",\n    },\n\n    /**\n     * Playground file data\n     *\n     * 演示文件数据\n     */\n    files: { type: String, required: true },\n\n    /**\n     * Playground settings\n     *\n     * 演示设置\n     */\n    settings: { type: String, default: \"{}\" },\n  },\n\n  setup(props) {\n    const vuePlaygroundOptions = useVuePlaygroundConfig();\n    const loading = ref(true);\n    const component = shallowRef<typeof Repl>();\n    const store = shallowRef<ReplStore>();\n\n    const playgroundOptions = computed(() =>\n      deepAssign(\n        {},\n        vuePlaygroundOptions,\n        getVuePlaygroundSettings(props.settings)\n      )\n    );\n\n    const setupRepl = async (): Promise<void> => {\n      const { ReplStore, Repl } = await import(\n        /* webpackChunkName: \"vue-repl\" */ \"@vue/repl\"\n      );\n\n      component.value = Repl;\n      store.value = new ReplStore({\n        serializedState: decodeURIComponent(props.files),\n      });\n\n      if (playgroundOptions.value.vueVersion)\n        await store.value.setVueVersion(playgroundOptions.value.vueVersion);\n    };\n\n    onMounted(async () => {\n      await setupRepl();\n      loading.value = false;\n    });\n\n    return (): (VNode | null)[] => [\n      h(\"div\", { class: \"vue-playground-wrapper\" }, [\n        props.title\n          ? h(\"div\", { class: \"header\" }, decodeURIComponent(props.title))\n          : null,\n        h(\n          \"div\",\n          {\n            class: \"repl-container\",\n          },\n          [\n            loading.value\n              ? h(LoadingIcon, { class: \"preview-loading\", height: 192 })\n              : null,\n            component.value\n              ? h(component.value, <ReplProps>{\n                  store: store.value,\n                  autoResize: true,\n                  ...playgroundOptions.value,\n                  layout: \"horizontal\",\n                })\n              : null,\n          ]\n        ),\n      ]),\n    ];\n  },\n});\n"],"names":["getVuePlaygroundSettings","settings","VuePlayground","defineComponent","props","vuePlaygroundOptions","useVuePlaygroundConfig","loading","ref","component","shallowRef","store","playgroundOptions","computed","deepAssign","setupRepl","ReplStore","Repl","onMounted","h","LoadingIcon"],"mappings":"2RAEO,MAAMA,EACXC,GAEsB,KAAK,MAAM,mBAAmBA,CAAQ,CAAC,ECM/D,IAAAC,EAAeC,EAAgB,CAC7B,KAAM,gBAEN,MAAO,CAML,MAAO,CACL,KAAM,OACN,QAAS,EACX,EAOA,MAAO,CAAE,KAAM,OAAQ,SAAU,EAAK,EAOtC,SAAU,CAAE,KAAM,OAAQ,QAAS,IAAK,CAC1C,EAEA,MAAMC,EAAO,CACX,MAAMC,EAAuBC,EAAuB,EAC9CC,EAAUC,EAAI,EAAI,EAClBC,EAAYC,EAAwB,EACpCC,EAAQD,EAERE,EAAAA,EAAoBC,EAAS,IACjCC,EACE,CACAT,EAAAA,EACAL,EAAyBI,EAAM,QAAQ,CACzC,CACF,EAEMW,EAAY,SAA2B,CAC3C,KAAM,CAAE,UAAAC,EAAW,KAAAC,CAAK,EAAI,KACS,QAAA,WACrC,EAEAR,EAAU,MAAQQ,EAClBN,EAAM,MAAQ,IAAIK,EAAU,CAC1B,gBAAiB,mBAAmBZ,EAAM,KAAK,CACjD,CAAC,EAEGQ,EAAkB,MAAM,YAC1B,MAAMD,EAAM,MAAM,cAAcC,EAAkB,MAAM,UAAU,CACtE,EAEA,OAAAM,EAAU,SAAY,CACpB,MAAMH,IACNR,EAAQ,MAAQ,EAClB,CAAC,EAEM,IAAwB,CAC7BY,EAAE,MAAO,CAAE,MAAO,wBAAyB,EAAG,CAC5Cf,EAAM,MACFe,EAAE,MAAO,CAAE,MAAO,QAAS,EAAG,mBAAmBf,EAAM,KAAK,CAAC,EAC7D,KACJe,EACE,MACA,CACE,MAAO,gBACT,EACA,CACEZ,EAAQ,MACJY,EAAEC,EAAa,CAAE,MAAO,kBAAmB,OAAQ,GAAI,CAAC,EACxD,KACJX,EAAU,MACNU,EAAEV,EAAU,MAAkB,CAC5B,MAAOE,EAAM,MACb,WAAY,GACZ,GAAGC,EAAkB,MACrB,OAAQ,YACV,CAAC,EACD,IACN,CACF,CACF,CAAC,CACH,CACF,CACF,CAAC"}