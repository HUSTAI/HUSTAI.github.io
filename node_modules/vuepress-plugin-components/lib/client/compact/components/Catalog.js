import{usePageData as L,useSiteData as F}from"@vuepress/client";import{defineComponent as A,computed as R,h as l}from"vue";import{useRouter as S}from"vue-router";import{useLocaleConfig as U,VPLink as m,startsWith as v,keys as D,endsWith as p}from"vuepress-shared/client";import f from"../../components/FontIcon.js";import"../styles/catalog.scss";import"../../styles/font-icon.scss";var E=A({name:"Catalog",props:{base:{type:String,default:""},level:{type:Number,default:3},titleGetter:{type:Function,default:a=>a.title},iconGetter:{type:Function,default:a=>a.icon},orderGetter:{type:Function,default:a=>a.order||0},shouldIndex:{type:Function,default:a=>a.index!==!1}},setup(a){const $=U(CATALOG_LOCALES),b=L(),y=S(),C=F(),k=()=>{const s=a.base||b.value.path.replace(/\/[^/]+$/,"/"),d=y.getRoutes(),h=[];return d.filter(({meta:e,path:t})=>{if(!v(t,s)||t===s)return!1;if(s==="/"){const r=D(C.value.locales).filter(i=>i!=="/");if(t==="/404.html"||r.some(i=>v(t,i)))return!1}return(p(t,".html")&&!p(t,"/index.html")||p(t,"/"))&&a.shouldIndex(e)}).map(({path:e,meta:t})=>{const r=e.substring(s.length).split("/").length;return{title:a.titleGetter(t),icon:a.iconGetter(t),base:e.replace(/\/[^/]+\/?$/,"/"),order:a.orderGetter(t),level:p(e,"/")?r-1:r,path:e}}).filter(({title:e,level:t})=>t<=a.level||!e).sort(({title:e,level:t,path:r,order:i},{title:c,level:n,path:u,order:o})=>t-n||(p(r,"/index.html")?-1:p(u,"/index.html")?1:i===null?o===null?e.localeCompare(c):o:o===null?i:i>0?o>0?i-o:-1:o<0?i-o:1)).forEach(e=>{var t;const{base:r,level:i}=e;switch(i){case 1:h.push(e);break;case 2:{const c=h.find(n=>n.path===r);c&&(c.children??=[]).push(e);break}default:{const c=h.find(n=>n.path===r.replace(/\/[^/]+\/$/,"/"));if(c){const n=(t=c.children)==null?void 0:t.find(u=>u.path===r);n&&(n.children??=[]).push(e)}}}}),h},w=R(()=>k());return()=>l("div",{class:"catalog-wrapper"},[l("h2",{class:"main-title"},$.value.title),w.value.map(({children:s=[],icon:d,path:h,title:e},t)=>[l("h3",{id:e,class:["child-title",{"has-children":s.length}]},[l("a",{href:`#${e}`,class:"header-anchor"},"#"),l(m,{class:"catalog-title",to:h},()=>[d?l(f,{icon:d}):null,`${t+1}. ${e||"Unknown"}`])]),s.length?l("ul",{class:"child-catalog-wrapper"},s.map(({children:r=[],icon:i,path:c,title:n},u)=>l("li",{class:"child-catalog-item"},[l("div",{class:["sub-title",{"has-children":r.length}]},[l("a",{href:`#${n}`,class:"header-anchor"},"#"),l(m,{class:"catalog-title",to:c},()=>[i?l(f,{icon:i}):null,`${t+1}.${u+1} ${n||"Unknown"}`])]),r.length?l("div",{class:"sub-catalog-wrapper"},r.map(({icon:o,path:g,title:x},G)=>l(m,{class:"sub-catalog-item",to:g},()=>[o?l(f,{icon:o}):null,`${t+1}.${u+1}.${G+1} ${x||"Unknown"}`]))):null]))):null])])}});export{E as default};
//# sourceMappingURL=Catalog.js.map
