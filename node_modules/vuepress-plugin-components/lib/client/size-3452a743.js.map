{"version":3,"file":"size-3452a743.js","sources":["../../src/client/composables/size.ts"],"sourcesContent":["import { isString } from \"@vuepress/shared\";\nimport type { MaybeRef } from \"@vueuse/core\";\nimport { useEventListener } from \"@vueuse/core\";\nimport type { Ref, ShallowRef } from \"vue\";\nimport { computed, isRef, onMounted, ref, shallowRef, unref, watch } from \"vue\";\n\nconst getValue = (value: string | number): string =>\n  isString(value) ? value : `${value}px`;\n\nexport interface SizeOptions {\n  width: string | number | undefined;\n  height: string | number | undefined;\n  ratio: string | number | undefined;\n}\n\nexport interface SizeInfo<E extends HTMLElement> {\n  el: ShallowRef<E | undefined>;\n  width: Ref<string>;\n  height: Ref<string>;\n}\n\nexport const useSize = <E extends HTMLElement>(\n  options: SizeOptions,\n  extraHeight: MaybeRef<number> = 0\n): SizeInfo<E> => {\n  const el = shallowRef<E>();\n  const width = computed(() => getValue(unref(options.width) || \"100%\"));\n  const height = ref(\"auto\");\n\n  const getRadio = (ratio: number | string | undefined): number => {\n    if (isString(ratio)) {\n      const [width, height] = ratio.split(\":\");\n      const parsedRadio = Number(width) / Number(height);\n\n      if (!Number.isNaN(parsedRadio)) return parsedRadio;\n    }\n\n    return typeof ratio === \"number\" ? ratio : 16 / 9;\n  };\n\n  const getHeight = (width: number): string => {\n    const height = unref(options.height);\n    const ratio = getRadio(unref(options.ratio));\n\n    return height\n      ? getValue(height)\n      : `${Number(width) / ratio + unref(extraHeight)}px`;\n  };\n\n  const updateHeight = (): void => {\n    if (el.value) height.value = getHeight(el.value.clientWidth);\n  };\n\n  onMounted(() => {\n    updateHeight();\n    if (isRef(extraHeight)) watch(extraHeight, () => updateHeight());\n    useEventListener(\"orientationchange\", () => updateHeight());\n    useEventListener(\"resize\", () => updateHeight());\n  });\n\n  return {\n    el,\n    width,\n    height,\n  };\n};\n"],"names":["getValue","value","isString","useSize","options","extraHeight","el","shallowRef","width","computed","unref","height","ref","getRadio","ratio","parsedRadio","getHeight","updateHeight","onMounted","isRef","watch","useEventListener"],"mappings":"oMAMA,MAAMA,EAAYC,GAChBC,EAASD,CAAK,EAAIA,EAAQ,GAAGA,MAclBE,EAAU,CACrBC,EACAC,EAAgC,IAChB,CAChB,MAAMC,EAAKC,EAAc,EACnBC,EAAQC,EAAS,IAAMT,EAASU,EAAMN,EAAQ,KAAK,GAAK,MAAM,CAAC,EAC/DO,EAASC,EAAI,MAAM,EAEnBC,EAAYC,GAA+C,CAC/D,GAAIZ,EAASY,CAAK,EAAG,CACnB,KAAM,CAACN,EAAOG,CAAM,EAAIG,EAAM,MAAM,GAAG,EACjCC,EAAc,OAAOP,CAAK,EAAI,OAAOG,CAAM,EAEjD,GAAI,CAAC,OAAO,MAAMI,CAAW,EAAG,OAAOA,EAGzC,OAAO,OAAOD,GAAU,SAAWA,EAAQ,GAAK,CAClD,EAEME,EAAaR,GAA0B,CAC3C,MAAMG,EAASD,EAAMN,EAAQ,MAAM,EAC7BU,EAAQD,EAASH,EAAMN,EAAQ,KAAK,CAAC,EAE3C,OAAOO,EACHX,EAASW,CAAM,EACf,GAAG,OAAOH,CAAK,EAAIM,EAAQJ,EAAML,CAAW,KAClD,EAEMY,EAAe,IAAY,CAC3BX,EAAG,QAAOK,EAAO,MAAQK,EAAUV,EAAG,MAAM,WAAW,EAC7D,EAEA,OAAAY,EAAU,IAAM,CACdD,EAAa,EACTE,EAAMd,CAAW,GAAGe,EAAMf,EAAa,IAAMY,EAAc,CAAA,EAC/DI,EAAiB,oBAAqB,IAAMJ,EAAa,CAAC,EAC1DI,EAAiB,SAAU,IAAMJ,EAAc,CAAA,CACjD,CAAC,EAEM,CACL,GAAAX,EACA,MAAAE,EACA,OAAAG,CACF,CACF"}