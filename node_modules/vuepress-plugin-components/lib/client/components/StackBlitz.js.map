{"version":3,"file":"StackBlitz.js","sources":["../../../src/client/components/StackBlitz.ts"],"sourcesContent":["/* eslint-disable vue/no-unused-properties */\n/**\n * @see https://developer.stackblitz.com/platform/api/javascript-sdk\n */\nimport type { UiThemeOption, UiViewOption } from \"@stackblitz/sdk\";\nimport sdk from \"@stackblitz/sdk\";\nimport type { PropType, VNode } from \"vue\";\nimport { computed, defineComponent, h, onMounted } from \"vue\";\n\nimport { useSize } from \"../composables/index.js\";\n\nimport \"../styles/stack-blitz.scss\";\n\n// FIXME: This is an issue of ts NodeNext\nconst stackblitzSDK = sdk as unknown as typeof sdk.default;\n\nexport default defineComponent({\n  name: \"StackBlitz\",\n\n  props: {\n    /**\n     * StackBlitz id\n     *\n     * @description Full StackBlitz url is also supported\n     *\n     * StackBlitz ID\n     *\n     * @description 也支持完整的 StackBlitz 链接\n     */\n    id: {\n      type: String,\n      required: true,\n    },\n\n    /**\n     * StackBlitz type\n     *\n     * StackBlitz 类型\n     */\n    type: {\n      type: String as PropType<\"project\" | \"github\">,\n      default: \"project\",\n    },\n\n    /**\n     * Component width\n     *\n     * 组件宽度\n     */\n    width: {\n      type: [String, Number],\n      default: \"100%\",\n    },\n\n    /**\n     * Component height\n     *\n     * 组件高度\n     */\n    height: {\n      type: [String, Number],\n      default: undefined,\n    },\n\n    /**\n     * Component width / height ratio\n     *\n     * 组件长宽比\n     */\n    ratio: {\n      type: [String, Number],\n      default: 16 / 9,\n    },\n\n    /**\n     * The default file to open in the editor\n     *\n     * 默认打开的文件\n     */\n    file: {\n      type: [String, Array] as PropType<string | string[]>,\n      default: \"\",\n    },\n\n    /**\n     * The initial URL path the preview should open\n     *\n     * 预览的初始 URL 路径\n     */\n    initialPath: {\n      type: String,\n      default: \"\",\n    },\n\n    /**\n     * embed editor\n     *\n     * 嵌入编辑器\n     */\n    embed: Boolean,\n\n    /**\n     * Whether load embed demo directly\n     *\n     * 是否直接加载嵌入演示\n     */\n    load: Boolean,\n\n    /**\n     * Which view to open by default\n     *\n     * 默认打开的视图\n     */\n    view: {\n      type: String as PropType<UiViewOption>,\n      default: \"preview\",\n    },\n\n    /**\n     * Hide file explorer panel in embed view\n     *\n     * 在嵌入视图中隐藏文件资源管理器面板\n     */\n    hideExplorer: Boolean,\n\n    /**\n     * Hide file explorer panel in embed view\n     *\n     * 在嵌入视图中隐藏文件资源管理器面板\n     */\n    hideNavigation: Boolean,\n\n    /**\n     * Hide the debugging console in the editor preview\n     *\n     * 隐藏编辑器预览中的调试控制台\n     */\n    hideDevtools: Boolean,\n\n    /**\n     * Height of the Terminal panel below the editor (as a percentage number).\n     */\n    terminalHeight: {\n      type: [String, Number],\n      default: 30,\n    },\n\n    /**\n     * Height of the Terminal panel below the editor (as a percentage number).\n     */\n    devToolsHeight: {\n      type: [String, Number],\n      default: 30,\n    },\n\n    /**\n     * Button text\n     *\n     * 按钮文字\n     */\n    text: {\n      type: String,\n      default: \"Open in StackBlitz\",\n    },\n\n    /**\n     * Theme\n     *\n     * 主题\n     */\n    theme: {\n      type: String as PropType<UiThemeOption>,\n      default: \"dark\",\n    },\n  },\n\n  setup(props) {\n    const { el, width, height } = useSize<HTMLIFrameElement>(props);\n\n    const options = computed(() => ({\n      openFile: props.file,\n      view: props.view,\n      theme: props.theme,\n      clickToLoad: props.load,\n      hideExplorer: props.hideExplorer,\n      hideNavigation: props.hideNavigation,\n      hideDevTools: props.hideDevtools,\n      initialPath: props.initialPath,\n    }));\n\n    onMounted(() => {\n      if (props.embed)\n        void stackblitzSDK[\n          props.type === \"github\" ? \"embedGithubProject\" : \"embedProjectId\"\n        ](el.value!, props.id, options.value);\n    });\n\n    return (): VNode =>\n      props.embed\n        ? h(\"div\", {\n            ref: el,\n            class: \"stackblitz-container\",\n            style: {\n              width: width.value,\n              height: height.value,\n            },\n          })\n        : h(\n            \"div\",\n            { class: \"stackblitz-container\" },\n            h(\n              \"button\",\n              {\n                type: \"button\",\n                class: \"stackblitz-button\",\n                onClick: () => {\n                  stackblitzSDK[\n                    props.type === \"github\"\n                      ? \"openGithubProject\"\n                      : \"openProjectId\"\n                  ](props.id, options.value);\n                },\n              },\n              props.text\n            )\n          );\n  },\n});\n"],"names":["stackblitzSDK","sdk","defineComponent","props","el","width","height","useSize","options","computed","onMounted","h"],"mappings":"kOAcA,MAAMA,EAAgBC,EAEtB,MAAeC,EAAgB,CAC7B,KAAM,aAEN,MAAO,CAUL,GAAI,CACF,KAAM,OACN,SAAU,EACZ,EAOA,KAAM,CACJ,KAAM,OACN,QAAS,SACX,EAOA,MAAO,CACL,KAAM,CAAC,OAAQ,MAAM,EACrB,QAAS,MACX,EAOA,OAAQ,CACN,KAAM,CAAC,OAAQ,MAAM,EACrB,QAAS,MACX,EAOA,MAAO,CACL,KAAM,CAAC,OAAQ,MAAM,EACrB,QAAS,GAAK,CAChB,EAOA,KAAM,CACJ,KAAM,CAAC,OAAQ,KAAK,EACpB,QAAS,EACX,EAOA,YAAa,CACX,KAAM,OACN,QAAS,EACX,EAOA,MAAO,QAOP,KAAM,QAON,KAAM,CACJ,KAAM,OACN,QAAS,SACX,EAOA,aAAc,QAOd,eAAgB,QAOhB,aAAc,QAKd,eAAgB,CACd,KAAM,CAAC,OAAQ,MAAM,EACrB,QAAS,EACX,EAKA,eAAgB,CACd,KAAM,CAAC,OAAQ,MAAM,EACrB,QAAS,EACX,EAOA,KAAM,CACJ,KAAM,OACN,QAAS,oBACX,EAOA,MAAO,CACL,KAAM,OACN,QAAS,MACX,CACF,EAEA,MAAMC,EAAO,CACX,KAAM,CAAE,GAAAC,EAAI,MAAAC,EAAO,OAAAC,CAAO,EAAIC,EAA2BJ,CAAK,EAExDK,EAAUC,EAAS,KAAO,CAC9B,SAAUN,EAAM,KAChB,KAAMA,EAAM,KACZ,MAAOA,EAAM,MACb,YAAaA,EAAM,KACnB,aAAcA,EAAM,aACpB,eAAgBA,EAAM,eACtB,aAAcA,EAAM,aACpB,YAAaA,EAAM,WACrB,EAAE,EAEF,OAAAO,EAAU,IAAM,CACVP,EAAM,OACHH,EACHG,EAAM,OAAS,SAAW,qBAAuB,gBACnD,EAAEC,EAAG,MAAQD,EAAM,GAAIK,EAAQ,KAAK,CACxC,CAAC,EAEM,IACLL,EAAM,MACFQ,EAAE,MAAO,CACP,IAAKP,EACL,MAAO,uBACP,MAAO,CACL,MAAOC,EAAM,MACb,OAAQC,EAAO,KACjB,CACF,CAAC,EACDK,EACE,MACA,CAAE,MAAO,sBAAuB,EAChCA,EACE,SACA,CACE,KAAM,SACN,MAAO,oBACP,QAAS,IAAM,CACbX,EACEG,EAAM,OAAS,SACX,oBACA,eACN,EAAEA,EAAM,GAAIK,EAAQ,KAAK,CAC3B,CACF,EACAL,EAAM,IACR,CACF,CACR,CACF,CAAC"}