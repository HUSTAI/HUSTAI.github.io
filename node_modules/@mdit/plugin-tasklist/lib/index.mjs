import d from"markdown-it/lib/token.js";const b=(s,e,l)=>{const t=s.attrIndex(e),n=[e,l];t<0?s.attrPush(n):s.attrs[t]=n},h=(s,e)=>{const l=s[e].level-1;for(let t=e-1;t>=0;t--)if(s[t].level===l)return t;return-1},k=s=>(s==null?void 0:s.type)==="inline",u=s=>(s==null?void 0:s.type)==="paragraph_open",p=s=>(s==null?void 0:s.type)==="list_item_open",x=s=>/^\[[xX \u00A0]\][ \u00A0]/.test(s.content),C=(s,e)=>k(s[e])&&u(s[e-1])&&p(s[e-2])&&x(s[e]),m=(s,e,{checkboxClass:l,disabled:t})=>{const n=new d("checkbox_input","input",0);return n.attrs=[["type","checkbox"],["class",l],["id",e]],/^\[[xX]\][ \u00A0]/.test(s.content)&&n.attrs.push(["checked","checked"]),t&&n.attrs.push(["disabled","disabled"]),n},f=(s,e)=>{const l=new d("label_open","label",1);return l.attrs=[["class",e],["for",s]],l},v=()=>new d("label_close","label",-1),g=(s,e,{disabled:l,checkboxClass:t,label:n,labelClass:r})=>{const c=`task-item-${e.env.tasklists++}`;s.children=s.children||[],s.children[0].content=s.children[0].content.slice(3),n&&(s.children.unshift(f(c,r)),s.children.push(v())),s.children.unshift(m(s,c,{checkboxClass:t,disabled:l}))},_=(s,{disabled:e=!0,label:l=!0,containerClass:t="task-list-container",itemClass:n="task-list-item",checkboxClass:r="task-list-item-checkbox",labelClass:c="task-list-item-label"}={})=>{s.core.ruler.after("inline","github-task-lists",o=>{const a=o.tokens;o.env.tasklists||(o.env.tasklists=0);for(let i=2;i<a.length;i++)C(a,i)&&(g(a[i],o,{disabled:e,label:l,checkboxClass:r,labelClass:c}),b(a[i-2],"class",n),b(a[h(a,i-2)],"class",t));return!0})};export{_ as tasklist};
//# sourceMappingURL=index.mjs.map
